@using Blazored.FluentValidation

<SchulCloudPageTitle Title="@Localizer["title"]"/>

<MudPaper Class="mt-15 px-3 py-3">
    @if (_user is null)
    {
        <MudText Typo="Typo.body1">@Localizer["userForm_Text"]</MudText>

        <EditForm Model="_model">
            <Validator For="() => _model.User" ValidateAsync="ValidateUserAsync" />
            <MudTextField @bind-Value="_model.User" Label="@Localizer["userForm_User"]" Required autocomplete="username" />

            <MudButton Class="mt-3" ButtonType="ButtonType.Submit" Color="Color.Primary">@Localizer["userForm_SubmitBtn"]</MudButton>
        </EditForm>
    }
    else if (ChangeToken is null)
    {
        <MudText Typo="Typo.body1">@Localizer["sendMailText"]</MudText>
        <MudButton Class="mt-3" Color="Color.Primary" OnClick="SendResetCode_ClickAsync" EndIcon="@MaterialSymbols.Outlined.Send">@Localizer["sendMailBtn"]</MudButton>
    }
    else
    {
        <EditForm Model="_model" OnValidSubmit="ResetPasswordAsync">
            <FluentValidationValidator />

            <PasswordField @bind-Value="_model.NewPassword" For="@(() => _model.NewPassword)"
                           Label="@Localizer["resetForm_NewPassword"]" Required autocomplete="new-password" />
            <PasswordField @bind-Value="_model.ConfirmedPassword" For="@(() => _model.ConfirmedPassword)"
                           Class="mt-2" Label="@Localizer["resetForm_ConfirmedPassword"]" Required autocomplete="off" />

            <MudButton Class="mt-3" ButtonType="ButtonType.Submit" Color="Color.Primary">@Localizer["resetForm_SubmitBtn"]</MudButton>
        </EditForm>
    }
</MudPaper>